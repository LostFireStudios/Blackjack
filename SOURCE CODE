using System;

namespace BlackJack
{
    class Program
    {
        static void Main(string[] args)
        {
            //set application stuff
            Console.Title = "Blackjack";
            Console.ForegroundColor = ConsoleColor.Magenta;

            //random var for loop
            int start, end;
            start = 0;
            end = 1;

            //loop for program
            while (start != end)
            {
                //ask for wager
                Console.WriteLine("Welome to Blackjack! How much money would you like to wager? ");
                string moneyWaged = Console.ReadLine();

                //ask again if value 0
                if (moneyWaged == "0")
                {
                    Console.WriteLine("Please enter a valid number. ");
                    Console.ReadLine();
                }

                //convert moneyWaged into int
                int _moneyWaged = Convert.ToInt32(moneyWaged);

                //start loop for actual wage
                if (_moneyWaged >= 1)
                {
                    //create rng for cards
                    Random faceCard = new Random();
                    int _faceCard = faceCard.Next(1, 10);
                    Random downCard = new Random();
                    int _downCard = downCard.Next(1, 10);
                    Random shapeRNG = new Random();
                    int _shapeRNG = shapeRNG.Next(1, 8);
                    Random multiplier = new Random();
                    int _multiplier = multiplier.Next(1, 10);
                    Random dealerFaceCard = new Random();
                    int _dealerFaceCard = dealerFaceCard.Next(1, 10);
                    Random dealerDownCard = new Random();
                    int _dealerDownCard = dealerDownCard.Next(1, 10);

                    //decide shape
                    string shape = "1";
                    if (_shapeRNG == 1)
                    {
                        shape = "Clubs";
                    }
                    if (_shapeRNG == 2)
                    {
                        shape = "Diamonds";
                    }
                    if (_shapeRNG == 3)
                    {
                        shape = "Hearts";
                    }
                    if (_shapeRNG == 4)
                    {
                        shape = "Spades";
                    }
                    if (_shapeRNG == 5)
                    {
                        shape = "Clubs";
                    }
                    if (_shapeRNG == 6)
                    {
                        shape = "Diamonds";
                    }
                    if (_shapeRNG == 7)
                    {
                        shape = "Hearts";
                    }
                    if (_shapeRNG == 8)
                    {
                        shape = "Spades";
                    }

                    //do the stuff related to game
                    Console.WriteLine();
                    Console.WriteLine("You wagered: " + _moneyWaged + " dollars ");
                    Console.WriteLine();
                    Console.WriteLine("Your face card: " + _faceCard + " of " + shape);

                    //pull shapeRNG again before facedown card
                    _shapeRNG = shapeRNG.Next(1, 8);

                    //pull shape value again
                    if (_shapeRNG == 1)
                    {
                        shape = "Clubs";
                    }
                    if (_shapeRNG == 2)
                    {
                        shape = "Diamonds";
                    }
                    if (_shapeRNG == 3)
                    {
                        shape = "Hearts";
                    }
                    if (_shapeRNG == 4)
                    {
                        shape = "Spades";
                    }
                    if (_shapeRNG == 5)
                    {
                        shape = "Clubs";
                    }
                    if (_shapeRNG == 6)
                    {
                        shape = "Diamonds";
                    }
                    if (_shapeRNG == 7)
                    {
                        shape = "Hearts";
                    }
                    if (_shapeRNG == 8)
                    {
                        shape = "Spades";
                    }

                    //tell the down card (if not ace)
                    if (_downCard >= 2)
                    {
                        Console.WriteLine("Your down card: " + _downCard + " of " + shape);

                        //find value and set it
                        int value = 10 + _downCard;
                        int valueAway = 21 - value;
                        Console.WriteLine();
                        Console.WriteLine("Total value: " + value);
                        Console.WriteLine("You are " + valueAway + " away from a bust. ");
                        Console.WriteLine("Type 1 to hit. Type 2 to stand. ");
                        string hitStand = Console.ReadLine();

                        if (hitStand == "1")
                        {
                            Console.WriteLine("You hit. ");

                            //draw new card for you
                            int _downCard2 = downCard.Next(1, 10);
                            int newValue = value + _downCard2;

                            //tell new card
                            Console.WriteLine("Your new card: " + _downCard2 + " of " + shape);

                            //decide whether dealer hits or not
                            int dealerValue = _dealerFaceCard + _dealerDownCard;

                            if(newValue == 21)
                            {
                                Console.WriteLine();
                                Console.WriteLine("You got the blackjack. ");
                                //calculate winnings
                                int winnings = _moneyWaged * _multiplier;
                                Console.WriteLine();

                                //tell winnings
                                Console.WriteLine("You won " + winnings + " dollars. ");
                                _moneyWaged = 0;
                                Console.ReadLine();
                            }
                            if (newValue > 21)
                            {
                                Console.WriteLine("You busted. ");

                                //calculate losses
                                int losses = _moneyWaged / _multiplier;
                                Console.WriteLine();

                                //tell losses
                                Console.WriteLine("You lost " + losses + " dollars. ");
                                _moneyWaged = 0;
                                Console.ReadLine();
                            }
                            if (newValue < 21)
                            {
                                if (dealerValue >= 16)
                                {
                                    Console.WriteLine("The dealer stands. ");

                                    //if you win against dealer
                                    if (newValue > dealerValue)
                                    {
                                        Console.WriteLine("You beat the dealer. ");

                                        //calculate winnings
                                        int winnings = _moneyWaged * _multiplier;
                                        Console.WriteLine();

                                        //tell winnings
                                        Console.WriteLine("You won " + winnings + " dollars. ");
                                        _moneyWaged = 0;
                                        Console.ReadLine();
                                    }
                                    //if you lose against dealer
                                    if (dealerValue > newValue)
                                    {
                                        Console.WriteLine("You lost to the dealer. ");

                                        //calculate losses
                                        int losses = _moneyWaged / _multiplier;
                                        Console.WriteLine();

                                        //tell losses
                                        Console.WriteLine("You lost " + losses + " dollars. ");
                                        _moneyWaged = 0;
                                        Console.ReadLine();
                                    }
                                }
                                if (dealerValue < 16)
                                {
                                    //random RNG to decide if dealer hits or stands
                                    Random hitRNG = new Random();
                                    int _hitRNG = hitRNG.Next(1, 4);

                                    int hit = 0;
                                    if (_hitRNG == 1)
                                    {
                                        hit = 1;
                                    }
                                    if (_hitRNG == 2)
                                    {
                                        hit = 2;
                                    }
                                    if (_hitRNG == 3)
                                    {
                                        hit = 1;
                                    }
                                    if (_hitRNG == 4)
                                    {
                                        hit = 2;
                                    }

                                    if (hit == 1)
                                    {
                                        Console.WriteLine("The dealer stands. ");

                                        if (newValue > dealerValue)
                                        {
                                            Console.WriteLine("You beat the dealer. ");

                                            //calculate winnings
                                            int winnings = _moneyWaged * _multiplier;
                                            Console.WriteLine();

                                            //tell winnings
                                            Console.WriteLine("You won " + winnings + " dollars. ");
                                            _moneyWaged = 0;
                                            Console.ReadLine();
                                        }
                                        //if you lose against dealer
                                        if (dealerValue > newValue)
                                        {
                                            Console.WriteLine("You lost to the dealer. ");

                                            //calculate losses
                                            int losses = _moneyWaged / _multiplier;
                                            Console.WriteLine();

                                            //tell losses
                                            Console.WriteLine("You lost " + losses + " dollars. ");
                                            _moneyWaged = 0;
                                            Console.ReadLine();
                                        }
                                    }
                                }
                            }
                        }
                        if (hitStand == "2")
                        {
                            Console.WriteLine("You stand. Your total: " + value);

                            //decide if dealer hits or stands
                            int dealerValue2 = _dealerFaceCard + _dealerDownCard;
                            if (dealerValue2 >= 16)
                            {
                                Console.WriteLine("The dealer stands. ");
                                Console.WriteLine("The dealer's total is: " + dealerValue2);

                                //if you win against dealer
                                if (value > dealerValue2)
                                {
                                    Console.WriteLine("You beat the dealer. ");

                                    //calculate winnings
                                    int winnings = _moneyWaged * _multiplier;
                                    Console.WriteLine();

                                    //tell winnings
                                    Console.WriteLine("You won " + winnings + " dollars. ");
                                    _moneyWaged = 0;
                                    Console.ReadLine();
                                }
                                //if you lose against dealer
                                if (dealerValue2 > value)
                                {
                                    Console.WriteLine("You lost to the dealer. ");

                                    //calculate losses
                                    int losses = _moneyWaged / _multiplier;
                                    Console.WriteLine();

                                    //tell losses
                                    Console.WriteLine("You lost " + losses + " dollars. ");
                                    _moneyWaged = 0;
                                    Console.ReadLine();
                                }
                            }
                            if (dealerValue2 < 16)
                            {
                                //random RNG to decide if dealer hits or stands
                                Random hitRNG = new Random();
                                int _hitRNG = hitRNG.Next(1, 4);

                                int hit = 0;
                                if (_hitRNG == 1)
                                {
                                    hit = 1;
                                }
                                if (_hitRNG == 2)
                                {
                                    hit = 2;
                                }
                                if (_hitRNG == 3)
                                {
                                    hit = 1;
                                }
                                if (_hitRNG == 4)
                                {
                                    hit = 2;
                                }

                                if (hit == 1)
                                {
                                    Console.WriteLine("The dealer stands. ");

                                    if (value > dealerValue2)
                                    {
                                        Console.WriteLine("You beat the dealer. ");

                                        //calculate winnings
                                        int winnings = _moneyWaged * _multiplier;
                                        Console.WriteLine();

                                        //tell winnings
                                        Console.WriteLine("You won " + winnings + " dollars. ");
                                        _moneyWaged = 0;
                                        Console.ReadLine();
                                    }
                                    //if you lose against dealer
                                    if (dealerValue2 > value)
                                    {
                                        Console.WriteLine("You lost to the dealer. ");

                                        //calculate losses
                                        int losses = _moneyWaged / _multiplier;
                                        Console.WriteLine();

                                        //tell losses
                                        Console.WriteLine("You lost " + losses + " dollars. ");
                                        _moneyWaged = 0;
                                        Console.ReadLine();
                                    }
                                }
                                if (hit == 2)
                                {
                                    //rng for new card
                                    int _dealerDownCard2 = dealerDownCard.Next(1, 10);

                                    //tell dealer hits
                                    Console.WriteLine("The dealer hits. ");

                                    //calculate new value
                                    int newDealerValue = dealerValue2 + _dealerDownCard2;

                                    if (value > dealerValue2)
                                    {
                                        Console.WriteLine("You beat the dealer. ");

                                        //calculate winnings
                                        int winnings = _moneyWaged * _multiplier;
                                        Console.WriteLine();

                                        //tell winnings
                                        Console.WriteLine("You won " + winnings + " dollars. ");
                                        _moneyWaged = 0;
                                        Console.ReadLine();
                                    }
                                    //if you lose against dealer
                                    if (dealerValue2 > value)
                                    {
                                        Console.WriteLine("You lost to the dealer. ");

                                        //calculate losses
                                        int losses = _moneyWaged / _multiplier;
                                        Console.WriteLine();

                                        //tell losses
                                        Console.WriteLine("You lost " + losses + " dollars. ");
                                        _moneyWaged = 0;
                                        Console.ReadLine();
                                    }
                                    if (dealerValue2 >= 21)
                                    {
                                        //tell that dealer busts
                                        Console.WriteLine("The dealer busts! ");

                                        //calculate winnings
                                        int winnings = _moneyWaged * _multiplier;
                                        Console.WriteLine();

                                        //tell winnings
                                        Console.WriteLine("You won " + winnings + " dollars. ");
                                        _moneyWaged = 0;
                                        Console.ReadLine();
                                    }
                                }
                            }
                        }
                        //tell down card (if ace)
                        if (_downCard == 1)
                        {
                            //tell won
                            Console.WriteLine("Your down card: Ace ");
                            Console.WriteLine("Congratulations, you won the Blackjack! ");

                            //multiply wager by multiplier to get winnings
                            int winnings = _moneyWaged * _multiplier;
                            Console.WriteLine();

                            //tell winnings
                            Console.WriteLine("You won " + winnings + " dollars. ");
                            _moneyWaged = 0;
                            Console.ReadLine();
                        }

                    }
                }
            }
        }
    }
}
